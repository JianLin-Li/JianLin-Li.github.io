<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>RabbitMQ on 浩瀚天空</title>
    <link>https://jianlin-li.github.io/categories/rabbitmq/</link>
    <description>Recent content in RabbitMQ on 浩瀚天空</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>Copyright © 1989–2025, 李建林 </copyright>
    <lastBuildDate>Tue, 10 Jun 2025 15:04:49 +0800</lastBuildDate><atom:link href="https://jianlin-li.github.io/categories/rabbitmq/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>RabbitMQ消息中间件详解</title>
      <link>https://jianlin-li.github.io/post/rabbitmq_review/</link>
      <pubDate>Tue, 10 Jun 2025 15:04:49 +0800</pubDate>
      
      <guid>https://jianlin-li.github.io/post/rabbitmq_review/</guid>
      <description>
        
          
            &lt;h1 id=&#34;rabbitmq-消息中间件详解&#34;&gt;RabbitMQ 消息中间件详解&lt;/h1&gt;
&lt;p&gt;&lt;figure&gt;
  &lt;picture&gt;

    
      
        
        
        
        
        
        
    &lt;img
      loading=&#34;lazy&#34;
      decoding=&#34;async&#34;
      alt=&#34;RabbitMQ的基本结构&#34;
      
        class=&#34;image_figure image_internal image_unprocessed&#34;
        src=&#34;https://jianlin-li.github.io/images/rabbitmq_1.png&#34;
      
      
    /&gt;

    &lt;/picture&gt;
&lt;/figure&gt;
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;组件介绍&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;Broker:它提供一种传输服务,它的角色就是维护一条从生产者到消费者的路线，保证数据能按照指定的方式进行传输,&lt;/li&gt;
&lt;li&gt;Exchange：消息交换机,它指定消息按什么规则,路由到哪个队列。&lt;/li&gt;
&lt;li&gt;Queue:消息的载体,每个消息都会被投到一个或多个队列。&lt;/li&gt;
&lt;li&gt;Binding:绑定，它的作用就是把exchange和queue按照路由规则绑定起来.&lt;/li&gt;
&lt;li&gt;Routing Key:路由关键字,exchange根据这个关键字进行消息投递。&lt;/li&gt;
&lt;li&gt;vhost:虚拟主机,一个broker里可以有多个vhost，用作不同用户的权限分离。&lt;/li&gt;
&lt;li&gt;Producer:消息生产者,就是投递消息的程序.&lt;/li&gt;
&lt;li&gt;Consumer:消息消费者,就是接受消息的程序.&lt;/li&gt;
&lt;li&gt;Channel:消息通道,在客户端的每个连接里,可建立多个channel.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure&gt;
  &lt;picture&gt;

    
      
        
        
        
        
        
        
    &lt;img
      loading=&#34;lazy&#34;
      decoding=&#34;async&#34;
      alt=&#34;RabbitMQ的消息发布和接收流程&#34;
      
        class=&#34;image_figure image_internal image_unprocessed&#34;
        src=&#34;https://jianlin-li.github.io/images/rabbitmq_2.png&#34;
      
      
    /&gt;

    &lt;/picture&gt;
&lt;/figure&gt;

&lt;strong&gt;一. 如何发送消息&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;生产者和Broker建立TCP连接&lt;/li&gt;
&lt;li&gt;生产者和Broker建立通道&lt;/li&gt;
&lt;li&gt;生产者通过通道消息发送给Broker，由Exchange将消息进行转发&lt;/li&gt;
&lt;li&gt;Exchange将消息转发到止跌那个的Queue（队列）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;二.如何接收消息&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;消费者和Broker建立TCP连接&lt;/li&gt;
&lt;li&gt;消费者和Broker建立通道&lt;/li&gt;
&lt;li&gt;消费者监听制定的Queue（队列）&lt;/li&gt;
&lt;li&gt;当有消息到达Queue时Broker默认将消息推送给消费者&lt;/li&gt;
&lt;li&gt;消费者接受到消息&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;消息中间件的作用&#34;&gt;消息中间件的作用&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;削峰&lt;/strong&gt;：缓冲瞬时高峰流量，避免系统被冲垮&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;解耦&lt;/strong&gt;：降低系统间耦合度，提高可维护性&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;异步通信&lt;/strong&gt;：提高系统响应速度，减少等待时间&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;顺序保证&lt;/strong&gt;：确保消息按特定顺序处理&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;数据冗余&lt;/strong&gt;：提供消息持久化，防止数据丢失&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;系统扩展&lt;/strong&gt;：便于系统水平扩展&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;amqp-高级消息队列协议&#34;&gt;AMQP 高级消息队列协议&lt;/h2&gt;
&lt;p&gt;AMQP（Advanced Message Queuing Protocol）是一个提供统一消息服务的应用层标准协议。&lt;/p&gt;
&lt;h2 id=&#34;交换器-exchange&#34;&gt;交换器 (Exchange)&lt;/h2&gt;
&lt;h3 id=&#34;交换器特性&#34;&gt;交换器特性&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;交换器与交换器可以相互绑定&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;交换器类型&#34;&gt;交换器类型&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;direct&lt;/code&gt;
&lt;figure&gt;
  &lt;picture&gt;

    
      
        
        
        
        
        
        
    &lt;img
      loading=&#34;lazy&#34;
      decoding=&#34;async&#34;
      alt=&#34;Direct 模式&#34;
      
        class=&#34;image_figure image_internal image_unprocessed&#34;
        src=&#34;https://jianlin-li.github.io/images/rabbitmq_direct.png&#34;
      
      
    /&gt;

    &lt;/picture&gt;
&lt;/figure&gt;

是最简单的模式.即创建消息队列的时候,指定一个路由键（RoutingKey）.当发送者发送消息的时候,指定对应的Key.当Key和消息队列的RoutingKey一致的时候,消息将会被发送到该消息队列中.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;topic&lt;/code&gt;
&lt;figure&gt;
  &lt;picture&gt;

    
      
        
        
        
        
        
        
    &lt;img
      loading=&#34;lazy&#34;
      decoding=&#34;async&#34;
      alt=&#34;Topic 主题模式&#34;
      
        class=&#34;image_figure image_internal image_unprocessed&#34;
        src=&#34;https://jianlin-li.github.io/images/rabbitmq_topic.png&#34;
      
      
    /&gt;

    &lt;/picture&gt;
&lt;/figure&gt;

topic转发信息主要是依据通配符,队列和交换机的绑定主要是依据一种模式(通配符+字符串),而当发送消息的时候,只有指定的Key和该模式相匹配的时候,消息才会被发送到该消息队列中.通配符：* 表示一个词，# 表示零个或多个词&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fanout&lt;/code&gt;
&lt;figure&gt;
  &lt;picture&gt;

    
      
        
        
        
        
        
        
    &lt;img
      loading=&#34;lazy&#34;
      decoding=&#34;async&#34;
      alt=&#34;Fanout模式&#34;
      
        class=&#34;image_figure image_internal image_unprocessed&#34;
        src=&#34;https://jianlin-li.github.io/images/rabbitmq_fanout.png&#34;
      
      
    /&gt;

    &lt;/picture&gt;
&lt;/figure&gt;

fanout是路由广播的形式,将会把消息发给绑定它的全部队列,即便设置了key,也会被忽略.因此我们发送到交换机的消息会使得绑定到该交换机的每一个Queue接收到消息,这个时候就算指定了路由键（routingKey）,或者规则(即上文中convertAndSend方法的参数2),也会被忽略!&lt;/li&gt;
&lt;li&gt;&lt;code&gt;header&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;system&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;自定义&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;交换器属性&#34;&gt;交换器属性&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;持久化&lt;/strong&gt;：&lt;code&gt;durable&lt;/code&gt; 参数让交换器存盘&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;自动删除&lt;/strong&gt;：当所有绑定的队列或交换器都解绑后自动删除(自动删除的前提是至少有一个队列或者交换器与这个交换器绑定，之后所有与这个交换器绑定的队列或者交换器都与此解绑。)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;队列-queue&#34;&gt;队列 (Queue)&lt;/h2&gt;
&lt;h3 id=&#34;队列特性&#34;&gt;队列特性&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;队列与交换器进行绑定&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;队列属性&#34;&gt;队列属性&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;持久化&lt;/strong&gt;：&lt;code&gt;durable&lt;/code&gt; 参数让队列存盘&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;排他性&lt;/strong&gt;：&lt;code&gt;exclusive&lt;/code&gt; 参数使队列仅对首次声明它的连接可见，连接断开时自动删除&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;自动删除&lt;/strong&gt;：当所有消费者都断开连接时自动删除(至少有一个消费者连接到这个队列，之后所有与这个队列连接的消费者都断开时，才会自动删除)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;声明机制&#34;&gt;声明机制&lt;/h2&gt;
&lt;p&gt;生产者和消费者都可以声明交换器或队列：&lt;/p&gt;
          
          
        
      </description>
    </item>
    
  </channel>
</rss>
